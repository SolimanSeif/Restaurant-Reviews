{"version":3,"sources":["idb.js"],"names":["idb_name","objectStoreName","version","allRestKey","getIDBObject","indexedDB","window","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","open","onupgradeneeded","db","result","store","createObjectStore","allResturnats","onsuccess","tx","transaction","objectStore","data","get","oncomplete","close","resturantByID","id","addAllResturants","restJson","put","addResturant"],"mappings":";;AAAA,IAAMA,WAAW,wBAAjB;AACA,IAAMC,kBAAmB,aAAzB;AACA,IAAMC,UAAU,CAAhB;;AAEA,IAAMC,aAAa,eAAnB;;AAGA,IAAIC,eAAc,SAAdA,YAAc,GAAM;AACvB,KAAIC,YAAYC,OAAOD,SAAP,IAAoBC,OAAOC,YAA3B,IAA2CD,OAAOE,eAAlD,IAAqEF,OAAOG,WAA5E,IAA2FH,OAAOI,aAAlH;AACA,KAAIC,OAAON,UAAUM,IAAV,CAAeX,QAAf,EAAyBE,OAAzB,CAAX;AACAS,MAAKC,eAAL,GAAuB,YAAW;AACjC,MAAIC,KAAKF,KAAKG,MAAd;AACA,MAAIC,QAAQF,GAAGG,iBAAH,CAAqBf,eAArB,CAAZ;AAEA,EAJD;AAKA,QAAOU,IAAP;AACA,CATD;;AAWA,IAAIM,gBAAgB,SAAhBA,aAAgB,GAAM;;AAEzB,KAAIN,OAAOP,cAAX;;AAEAO,MAAKO,SAAL,GAAiB,YAAI;AACpB,MAAIL,KAAKF,KAAKG,MAAd;AACG,MAAIK,KAAKN,GAAGO,WAAH,CAAenB,eAAf,CAAT;AACA,MAAIc,QAAQI,GAAGE,WAAH,CAAepB,eAAf,CAAZ;AACA,MAAIqB,OAAOP,MAAMQ,GAAN,CAAUpB,UAAV,CAAX;AACAgB,KAAGK,UAAH,GAAgB,YAAW;AACvBX,MAAGY,KAAH;AACH,GAFD;AAGA,SAAOH,IAAP;AACH,EATD;AAWA,CAfD;;AAkBA,SAASI,aAAT,CAAuBC,EAAvB,EAA0B;AACzB,KAAIhB,OAAOP,cAAX;;AAEAO,MAAKO,SAAL,GAAiB,YAAI;AACpB,MAAIL,KAAKF,KAAKG,MAAd;AACG,MAAIK,KAAKN,GAAGO,WAAH,CAAenB,eAAf,CAAT;AACA,MAAIc,QAAQI,GAAGE,WAAH,CAAepB,eAAf,CAAZ;AACA,MAAIqB,OAAOP,MAAMQ,GAAN,CAAUI,EAAV,CAAX;AACAR,KAAGK,UAAH,GAAgB,YAAW;AACvBX,MAAGY,KAAH;AACH,GAFD;AAGA,SAAOH,IAAP;AACH,EATD;AAUA;;AAED,IAAIM,mBAAmB,SAAnBA,gBAAmB,CAACC,QAAD,EAAc;AACpC,KAAIlB,OAAOP,cAAX;AACAO,MAAKO,SAAL,GAAiB,YAAI;AACpB,MAAIL,KAAKF,KAAKG,MAAd;AACA,MAAIK,KAAKN,GAAGO,WAAH,CAAenB,eAAf,EAAgC,WAAhC,CAAT;AACA,MAAIc,QAAQI,GAAGE,WAAH,CAAepB,eAAf,CAAZ;AACAc,QAAMe,GAAN,CAAUD,QAAV,EAAoB1B,UAApB;AACAgB,KAAGK,UAAH,GAAgB,YAAW;AACpBX,MAAGY,KAAH;AACH,GAFJ;AAGG;AACH,EATD;AAUA,CAZD;;AAeA,IAAIM,eAAe,SAAfA,YAAe,CAACJ,EAAD,EAAKE,QAAL,EAAiB;AACnC,KAAIlB,OAAOP,cAAX;AACAO,MAAKO,SAAL,GAAiB,YAAI;AACpB,MAAIL,KAAKF,KAAKG,MAAd;AACA,MAAIK,KAAKN,GAAGO,WAAH,CAAenB,eAAf,EAAgC,WAAhC,CAAT;AACA,MAAIc,QAAQI,GAAGE,WAAH,CAAepB,eAAf,CAAZ;AACAc,QAAMe,GAAN,CAAUD,QAAV,EAAoBF,EAApB;AACAR,KAAGK,UAAH,GAAgB,YAAW;AACpBX,MAAGY,KAAH;AACH,GAFJ;AAGA;AACA,EATD;AAUA,CAZD","file":"idb.js","sourcesContent":["const idb_name = 'mws-restaurant-stage-1';\r\nconst objectStoreName =  'Restaurants';\r\nconst version = 1;\r\n\r\nconst allRestKey = 'allResturnats';\r\n\r\n\r\nvar getIDBObject =() => {\r\n\tvar indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;\r\n\tvar open = indexedDB.open(idb_name, version);\r\n\topen.onupgradeneeded = function() {\r\n\t\tvar db = open.result;\r\n\t\tvar store = db.createObjectStore(objectStoreName);\r\n\r\n\t};\r\n\treturn open;\r\n}\r\n\r\nvar allResturnats = () => {\r\n\t\r\n\tlet open = getIDBObject();\r\n\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n    \tvar tx = db.transaction(objectStoreName);\r\n    \tvar store = tx.objectStore(objectStoreName);\r\n    \tvar data = store.get(allRestKey);\r\n    \ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n    \treturn data;\r\n\t};\r\n\r\n}\r\n\r\n\r\nfunction resturantByID(id){\r\n\tlet open = getIDBObject();\r\n\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n    \tvar tx = db.transaction(objectStoreName);\r\n    \tvar store = tx.objectStore(objectStoreName);\r\n    \tvar data = store.get(id);\r\n    \ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n    \treturn data;\r\n\t};\r\n}\r\n\r\nvar addAllResturants = (restJson) => {\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(objectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(objectStoreName);\r\n\t\tstore.put(restJson, allRestKey);\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t    return;\r\n\t}\r\n}\r\n\r\n\r\nvar addResturant = (id, restJson) =>{\r\n\tlet open = getIDBObject();\r\n\topen.onsuccess = ()=>{\r\n\t\tvar db = open.result;\r\n\t\tvar tx = db.transaction(objectStoreName, 'readwrite');\r\n\t\tvar store = tx.objectStore(objectStoreName);\r\n\t\tstore.put(restJson, id);\r\n\t\ttx.oncomplete = function() {\r\n\t        db.close();\r\n\t    };\r\n\t\treturn;\r\n\t}\r\n}"]}